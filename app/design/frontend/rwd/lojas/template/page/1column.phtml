<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     jacksalada_mais_vendidos
 * @copyright   Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Template for Mage_Page_Block_Html
 */
?>

<!DOCTYPE html>

<!--[if lt IE 7 ]> <html lang="<?php echo $this->getLang(); ?>" id="top" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="<?php echo $this->getLang(); ?>" id="top" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="<?php echo $this->getLang(); ?>" id="top" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="<?php echo $this->getLang(); ?>" id="top" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="<?php echo $this->getLang(); ?>" id="top" class="no-js"> <!--<![endif]-->

<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
  

<header id="header">
    <nav class='navbar navbar-inverse'>
    <div class="container-fluid">
        <div data-title='Menu' id='access-global-menu'>
            <a data-target='#global-menu' href='javascript:void(0);' id='link-global-menu'>
              <i class='burger-menu-css'></i>
              <span class='text-hide'>Abrir Menu</span>
            </a>
        </div>
        <a class="logo" href="<?php echo $this->getUrl('') ?>">
            <img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" class="large" />
            <img src="<?php echo $this->getLogoSrcSmall() ?>" alt="<?php echo $this->getLogoAlt() ?>" class="small" />
        </a>

        <?php // In order for the language switcher to display next to logo on smaller viewports, it will be moved here.
              // See app.js for details ?>
        <div class="store-language-container"></div>

        <!-- Skip Links -->

         <div class="pull-right">
           <!--  <a href="#header-nav" class="skip-link skip-nav">
                <span class="icon"></span>
                <span class="label"><?php echo $this->__('Menu'); ?></span>
            </a>

            <a href="#header-search" class="skip-link skip-search">
                <span class="icon"></span>
                <span class="label"><?php echo $this->__('Search'); ?></span>
            </a> -->

            <div class="account-cart-wrapper">
              <div class='link-account'>
               <!--  <a href="<?php echo $this->helper('customer')->getAccountUrl(); ?>" data-target-element="#header-account" class="btn btn-link" title='Veja os últimos pedidos ou altere seus dados'>
                    
                     Minha Conta
                </a> -->

                <?php if (Mage::getSingleton('customer/session')->isLoggedIn()==0): ?>
                            <ul class="links">
                              <!-- <li class="welcome-msg"><?php echo $this->getChildHtml('welcome') ?> <?php echo $this->getAdditionalHtml() ?></li> -->

                                <li class="contatopo"><a href="<?php echo $this->getBaseUrl()?>customer/account/" title="<?php echo $this->__('My Account') ?>" data-hover="<?php echo $this->__('My Account') ?>"><?php echo $this->__('My Account') ?></a></li>
                               <!--  <li><a href="/nossas-lojas">Lojas</a></li>
                                <li><a href="/contato">Fale Conosco</a></li>
                                <li><a href="<?php echo $this->getBaseUrl()?>customer/account/login/" title="<?php echo $this->__('Log In') ?>" data-hover="<?php echo $this->__('Log In') ?>"><?php echo $this->__('Log In') ?></a> ou <a href="<?php echo $this->getBaseUrl()?>customer/account/create/" title="<?php echo $this->__('Register') ?>" data-hover="<?php echo $this->__('Register') ?>"><?php echo $this->__('Register') ?></a></li> -->
                            </ul>
                        <?php else:?>
                            <ul class="links">
                              <li class="welcome-msg"><?php echo $this->getChildHtml('welcome') ?> <?php echo $this->getAdditionalHtml() ?><span class="caret"></span></li>
                              
                                <!-- <li><a href="<?php echo $this->getBaseUrl()?>customer/account/" title="<?php echo $this->__('My Account') ?>" data-hover="<?php echo $this->__('My Account') ?>"><?php echo $this->__('My Account') ?></a></li>
                                 <li><a href="/nossas-lojas">Lojas</a></li>
                                <li><a href="/contato">Fale Conosco</a></li> -->
                                <ul class="dropdown-menu" role="menu">
                                 <li><a href="<?php echo $this->getBaseUrl()?>/sales/order/history/" title="<?php echo $this->__('') ?>" data-hover="<?php echo $this->__('') ?>"><?php echo $this->__('Últimos Pedidos') ?></a></li>  
                                <li><a href="<?php echo $this->getBaseUrl()?>customer/account/edit/" title="<?php echo $this->__('') ?>" data-hover="<?php echo $this->__('') ?>"><?php echo $this->__('Editar Perfil') ?></a></li>  
                                 <li><a href="<?php echo $this->getBaseUrl()?>/customer/address/index/" title="<?php echo $this->__('') ?>" data-hover="<?php echo $this->__('') ?>"><?php echo $this->__('Endereço de entrega') ?></a></li>  
                                 <li><a href="<?php echo $this->getBaseUrl()?>customer/account/logout" title="<?php echo $this->__('Log Out') ?>" data-hover="<?php echo $this->__('Log Out') ?>"><?php echo $this->__('Log Out') ?></a></li>    
                                 </ul>                          
                            </ul>
                        <?php endif;?>
              </div>

                <!-- Cart -->

                <!-- <div class="header-minicart">
                    <?php echo $this->getChildHtml('minicart_head'); ?>
                </div> -->
                <a class='btn btn-default' href='pedir-agora.html' id='btn-order-now' title='Faça agora o seu pedido'>Pedir agora</a>
            </div>


        

        <!-- Account -->

        <div id="header-account" class="skip-content">

            <?php echo $this->getChildHtml('topLinks') ?>
        </div>
  </div>
  </div>
</nav>

</header> 
 <nav id='global-menu'>
      <ul class='nav nav-pills nav-stacked'>
        <li>
          <a href='http://52.21.137.15/index.php/cardapio.html'>
            <i class='icon-icon-flatware'></i>
            Cardápio
          </a>
        </li>
        <li>
          <a href='#'>
            <i class='icon-jack-salada'></i>
            Sobre o Jack Salada
          </a>
        </li>
        <li>
          <a href='http://52.21.137.15/index.php/lojas.html'>
            <i class='icon-location-1'></i>
            Lojas
          </a>
        </li>
        <li>
          <a href='#'>
            <i class='icon-store'></i>
            Seja um franqueado
          </a>
        </li>
        <li>
          <a href='#'>
            <i class='icon-heart-1'></i>
            Trabalhe conosco
          </a>
        </li>
        <li>
          <a href='#'>
            <i class='icon-comment'></i>
            Contato
          </a>
        </li>
      </ul>
    </nav>
   
   
  


       
 <main id='content'>
   
      <section>
      
    
    <?php echo $this->getChildHtml('global_notices') ?>
    
   
      
       

              <!--   <?php echo $this->getChildHtml('breadcrumbs') ?> -->
             
                
                    <?php echo $this->getChildHtml('global_messages') ?>
                    <?php echo $this->getChildHtml('content') ?>
              
            <?php echo $this->getChildHtml('footer_before') ?>
        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('global_cookie_notice') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>
       
        
      
      </section>
</main>
 
<?php echo $this->getAbsoluteFooter() ?>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;signed_in=true&amp;libraries=places"></script>
<script>
function initialize() {
  
  var rio = new google.maps.LatLng(-22.9394884,-43.2179575);

  var blueEssence = [
    {
        "featureType": "landscape.natural",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#e0efef"
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "hue": "#1900ff"
            },
            {
                "color": "#c0e8e8"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "geometry",
        "stylers": [
            {
                "lightness": 100
            },
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit.line",
        "elementType": "geometry",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "lightness": 700
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "color": "#7dcdcd"
            }
        ]
    }
  ];

  // Create a new StyledMapType object, passing it the array of styles,
  // as well as the name to be displayed on the map type control.
  var styledMap = new google.maps.StyledMapType(blueEssence,
    {name: "Blue Essence"});

  var mapOptions = {
    zoom: 12,
    center: rio,
    mapTypeControl: false,
    mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style'],
      position: google.maps.ControlPosition.TOP_LEFT
    },
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.LEFT_CENTER
    },
    scaleControl: true,
    streetViewControl: true,
    streetViewControlOptions: {
        position: google.maps.ControlPosition.LEFT_CENTER
    }
  }
  var map = new google.maps.Map(document.getElementById('map'),
    mapOptions);

  //Associate the styled map with the MapTypeId and set it to display.
  map.mapTypes.set('map_style', styledMap);
  map.setMapTypeId('map_style');

  setMarkers(map, stores);
}

/**
 * Data for the markers consisting of a name, a LatLng and a zIndex for
 * the order in which these markers should display on top of each
 * other.
 */
var stores = [
  ['Jack Salada - São José', -22.905166, -43.174810, 4],
  ['Jack Salada - Copacabana', -22.971280, -43.189140, 5],
  ['Jack Salada - Ipanema', -22.983291, -43.203860, 3],
  ['Jack Salada - Botafogo', -22.947215, -43.184205, 2]
];

function setMarkers(map, locations) {
  // Add markers to the map

  // Marker sizes are expressed as a Size of X,Y
  // where the origin of the image (0,0) is located
  // in the top left of the image.

  // Origins, anchor positions and coordinates of the marker
  // increase in the X direction to the right and in
  // the Y direction down.
  var image = {
    url: './assets/images/marker.svg',
    // This marker is 20 pixels wide by 32 pixels tall.
    //size: new google.maps.Size(20, 32),
    // The origin for this image is 0,0.
    //origin: new google.maps.Point(0,0),
    // The anchor for this image is the base of the flagpole at 0,32.
    //anchor: new google.maps.Point(0, 32)
  };
  // Shapes define the clickable region of the icon.
  // The type defines an HTML &lt;area&gt; element 'poly' which
  // traces out a polygon as a series of X,Y points. The final
  // coordinate closes the poly by connecting to the first
  // coordinate.
  var shape = {
      coords: [1, 1, 1, 20, 18, 20, 18 , 1],
      type: 'poly'
  };



  function convertToSlug(textConvert) {
    // remove accents, swap ñ for n, etc
    var from = "ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;";
    var to   = "aaaaaeeeeeiiiiooooouuuunc------";
    for (var i=0, l=from.length ; i<l ; i++) {
      textConvert = textConvert
      .replace(new RegExp(from.charAt(i), 'g'), to.charAt(i))
      .toLowerCase()
      .replace(/ /g,'-')
      .replace(/-+/g, '-');
    }

    // textConvert = textConvert.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
    //   .replace(/\s+/g, '-') // collapse whitespace and replace by -
    //   .replace(/-+/g, '-'); // collapse dashes

    return textConvert;
  }

  for (var i = 0; i < locations.length; i++) {
    var store = locations[i];
    var myLatLng = new google.maps.LatLng(store[1], store[2]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: image,
        shape: shape,
        title: store[0],
        zIndex: store[3]
    });

    //var titleMarker = this.getTitle();

    google.maps.event.addListener(marker, 'click', function() {
      jQuery('.modal-push:visible').slideUp();
      jQuery('#modal-' + convertToSlug(this.getTitle())).not(':visible').slideDown();
      jQuery('#footer').toggleClass('hidden-tmp');
      // console.log('#modal-' + convertToSlug(this.getTitle()));

      // Center the map when click on Marker
      map.panTo(this.getPosition());;
      map.setZoom(17);
    });

    // do something only the first time the map is loaded
    google.maps.event.addListenerOnce(map, 'idle', function() {
      setTimeout(function(){
        jQuery('body').addClass('map-loaded');
      }, 3000);
    });
  }
}

jQuery('#map').css({
  height: heightDocument
});
jQuery('#filter-stores').css({
  top: heightHeader
});

// jQuery(function() {
google.maps.event.addDomListener(window, 'load', initialize);
// });
</script>
</body>
</html>

